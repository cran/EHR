<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>EHR Vignette for Extract-Med and Pro-Med-NLP</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />




</head>

<body>




<h1 class="title toc-ignore">EHR Vignette for <em>Extract-Med</em> and <em>Pro-Med-NLP</em></h1>



<div id="introduction" class="section level1">
<h1>Introduction</h1>
<p>The <code>EHR</code> package provides several modules to perform diverse medication-related studies using data from electronic health record (EHR) databases. Especially, the package includes modules to perform pharmacokinetic/pharmacodynamic (PK/PD) analyses using EHRs, as outlined in Choi, et al.<span class="math inline">\(^{1}\)</span>, and additional modules will be added in future. This vignette describes two modules in the system, when drug dosing information should be obtained from unstructured clinical notes. The process starts with data extraction (<em>Extract-Med</em>), then moves on to data processing (<em>Pro-Med-NLP</em>), from which a final data set can be built.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(EHR)</code></pre></div>
<div id="extract-med" class="section level2">
<h2>Extract-Med</h2>
<p>The <em>Extract-Med</em> module uses a natural language processing (NLP) system called <em>medExtractR</em>.<span class="math inline">\(^{2}\)</span> The medExtractR system is a medication extraction system that uses regular expressions and rule-based approaches to identify key dosing information including drug name, strength, dose amount, frequency or intake time, dose change, and last dose time. Function arguments can be specified to allow the user to tailor the medExtractR system to the particular drug or dataset of interest, improving the quality of extracted information.</p>
<div id="setup-of-extractmed" class="section level3">
<h3>Setup of <code>extractMed</code></h3>
<p>The function <code>extractMed</code> will run the Extract-Med module. In order to run the Extract-Med module with medExtractR, certain function arguments must be specified, including:</p>
<ul>
<li><code>note_fn</code>: The file name of the note on which to run the system. This can be either a single file name (e.g., <code>&quot;clinical_note01.txt&quot;</code>) or a vector or list of file names (e.g., <code>c(&quot;clinical_note01.txt&quot;, &quot;clinical_note02.txt&quot;)</code> or <code>list(&quot;clinical_note01.txt&quot;, &quot;clinical_note02.txt&quot;)</code>).<br />
</li>
<li><code>drugnames</code>: Names of the drugs for which we want to extract medication dosing information. This can include any way in which the drug name might be represented in the clinical note, such as generic name (e.g., <code>&quot;lamotrigine&quot;</code>), brand name (e.g., <code>&quot;Lamictal&quot;</code>), or an abbreviation (e.g., <code>&quot;LTG&quot;</code>).<br />
</li>
<li><code>drgunit</code>: The unit of the drug(s) listed in <code>drugnames</code>, for example <code>&quot;mg&quot;</code>.<br />
</li>
<li><code>windowlength</code>: Length of the search window around each found drug name in which to search for dosing information. There is no default for this argument, requiring the user to carefully consider its value through tuning (see tuning section below).<br />
</li>
<li><p><code>max_edit_dist</code>: The maximum edit distance allowed when identifying <code>drugnames</code>. Maximum edit distance determines the difference between two strings, and is defined as the number of insertions, deletions, or substitutions required to change one string into the other. This allows us to capture misspellings in the drug names we are searching for, and its value should be carefully considered through tuning (see tuning section below).</p></li>
<li>The default value is '0', or exact spelling matches to <code>drugnames</code>. A value of 0 is always used for drug names with less than 5 characters regardless of the value set by <code>max_edit_dist</code>.</li>
<li>A value of 1 would capture mistakes such as a single missing or extra letter, e.g., &quot;tacrlimus&quot; or &quot;tacroolimus&quot; instead of &quot;tacrolimus&quot;<br />
</li>
<li>A value of 2 would capture these mistakes or a single transposition, e.g. &quot;tcarolimus&quot; instead of &quot;tacrolimus&quot;<br />
</li>
<li><p>Higher values (3 or above) would capture increasingly more severe mistakes, though setting the value too high can cause similar words to be mistaken as the drug name.</p></li>
</ul>
<p>Generally, the function call to <code>extractMed</code> is</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">extractMed</span>(note_fn, drugnames, drgunit, windowlength, max_edit_dist, ...)</code></pre></div>
<p>where <code>...</code> refers to additional arguments to <em>medExtractR</em> (see package documentation for details<span class="math inline">\(^{3}\)</span>). Examples of additional arguments include:</p>
<ul>
<li><p><code>strength_sep</code>, where users can specify special characters to separate doses administered at different times of day. For example, consider the drug name <em>&quot;lamotrigine&quot;</em> and the phrase <em>&quot;Patient is on lamotrigine 200-300&quot;</em>, indicating that the patient takes 200 mg of the drug in the morning and 300 mg in the evening. Setting <code>strength_sep = c('-')</code> would allow <code>extractMed</code> to identify the expression <em>200-300</em> as &quot;Dose&quot; (i.e., dose given intake) since they are separated by the special character &quot;-&quot;. The default value is <code>NULL</code>.</p></li>
<li><p><code>lastdose</code>, a logical input specifying whether or not the last dose time entity should be extracted. Default value is <code>FALSE</code>.</p></li>
</ul>
<p>As mentioned above, some arguments to <code>extractMed</code> should be specified through a tuning process. In a later section, we briefly describe the process by which a user could tune the medExtractR system (and by extension the <code>extractMed</code> function) using a validated gold standard dataset.</p>
</div>
<div id="running-extractmed" class="section level3">
<h3>Running <code>extractMed</code></h3>
<p>Below, we demonstrate how to execute the Extract-Med module using sample notes for two drugs: tacrolimus (simpler prescription patterns, used to prevent rejection after organ transplant) and lamotrigine (more complex prescription patterns, used to treat epilepsy). The arguments specified for each drug here were determined based on training sets of 60 notes for each drug.<span class="math inline">\(^{2}\)</span> Note that for tacrolimus we enter the file names as a list, and for lamotrigine we enter the file names as a character vector; either form of input is acceptable to the <code>extractMed</code> function and will produce the same output. We also specify <code>lastdose=TRUE</code> for tacrolimus to extract information about time of last dose, and <code>strength_sep=&quot;-&quot;</code> for lamotrigine.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># tacrolimus note file names</span>
tac_fn &lt;-<span class="st"> </span><span class="kw">list</span>(
  <span class="kw">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;tacpid1_2008-06-26_note1_1.txt&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>),
  <span class="kw">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;tacpid1_2008-06-26_note2_1.txt&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>),
  <span class="kw">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;tacpid1_2008-12-16_note3_1.txt&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>)
)

<span class="co"># execute module</span>
tac_mxr &lt;-<span class="st"> </span><span class="kw">extractMed</span>(tac_fn,
                       <span class="dt">drugnames =</span> <span class="kw">c</span>(<span class="st">&quot;tacrolimus&quot;</span>, <span class="st">&quot;prograf&quot;</span>, <span class="st">&quot;tac&quot;</span>, <span class="st">&quot;tacro&quot;</span>, <span class="st">&quot;fk&quot;</span>, <span class="st">&quot;fk506&quot;</span>),
                       <span class="dt">drgunit =</span> <span class="st">&quot;mg&quot;</span>,
                       <span class="dt">windowlength =</span> <span class="dv">60</span>,
                       <span class="dt">max_edit_dist =</span> <span class="dv">2</span>,
                       <span class="dt">lastdose=</span><span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## running notes 1-3 in batch 1 of 1 (100%)</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># lamotrigine note file name</span>
lam_fn &lt;-<span class="st"> </span><span class="kw">c</span>(
  <span class="kw">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;lampid1_2016-02-05_note4_1.txt&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>),
  <span class="kw">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;lampid1_2016-02-05_note5_1.txt&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>),
  <span class="kw">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;lampid2_2008-07-20_note6_1.txt&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>),
  <span class="kw">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;lampid2_2012-04-15_note7_1.txt&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>)
)

<span class="co"># execute module</span>
lam_mxr &lt;-<span class="st"> </span><span class="kw">extractMed</span>(lam_fn,
                       <span class="dt">drugnames =</span> <span class="kw">c</span>(<span class="st">&quot;lamotrigine&quot;</span>, <span class="st">&quot;lamotrigine XR&quot;</span>, 
                                     <span class="st">&quot;lamictal&quot;</span>, <span class="st">&quot;lamictal XR&quot;</span>, 
                                     <span class="st">&quot;LTG&quot;</span>, <span class="st">&quot;LTG XR&quot;</span>),
                       <span class="dt">drgunit =</span> <span class="st">&quot;mg&quot;</span>,
                       <span class="dt">windowlength =</span> <span class="dv">130</span>,
                       <span class="dt">max_edit_dist =</span> <span class="dv">1</span>,
                       <span class="dt">strength_sep=</span><span class="st">&quot;-&quot;</span>)</code></pre></div>
<pre><code>## running notes 1-4 in batch 1 of 1 (100%)</code></pre>
<p>The format of output from the Extract-Med module is a <code>data.frame</code> with 4 columns:</p>
<ul>
<li><code>filename</code>: The file name of the corresponding clinical note, to label results.<br />
</li>
<li><code>entity</code>: The label of the entity for the extracted expression.<br />
</li>
<li><code>expr</code>: Expression extracted from the clinical note.<br />
</li>
<li><code>pos</code>: Position of the extracted expression in the note, in the format <code>startPosition:stopPosition</code></li>
</ul>
<pre><code>## tacrolimus medExtractR output:</code></pre>
<pre><code>##                         filename    entity        expr     pos
## 1 tacpid1_2008-06-26_note1_1.txt  DrugName     Prograf 930:937
## 2 tacpid1_2008-06-26_note1_1.txt     Route        Oral 938:942
## 3 tacpid1_2008-06-26_note1_1.txt  Strength        1 mg 951:955
## 4 tacpid1_2008-06-26_note1_1.txt   DoseAmt           3 956:957
## 5 tacpid1_2008-06-26_note1_1.txt     Route    by mouth 967:975
## 6 tacpid1_2008-06-26_note1_1.txt Frequency twice a day 976:987</code></pre>
<pre><code>## lamotrigine medExtractR output:</code></pre>
<pre><code>##                         filename       entity        expr     pos
## 1 lampid1_2016-02-05_note4_1.txt     DrugName    Lamictal 810:818
## 2 lampid1_2016-02-05_note4_1.txt DoseStrength      300 mg 819:825
## 3 lampid1_2016-02-05_note4_1.txt    Frequency         BID 826:829
## 4 lampid1_2016-02-05_note4_1.txt     DrugName Lamotrigine 847:858
## 5 lampid1_2016-02-05_note4_1.txt     Strength       200mg 859:864
## 6 lampid1_2016-02-05_note4_1.txt      DoseAmt         1.5 865:868</code></pre>
<p>The lamotrigine results can be immediately put into the <code>parse</code> step of the Pro-Med-NLP module. For the tacrolimus output, we chose to also extract the last dose time entity by specifying <code>lastdose=TRUE</code>. The last dose time entity is extracted as raw character expressions from the clinical note, and must first be converted to a standardized datetime format, which is addressed in a later section (see &quot;Handling <code>lastdose</code>&quot; section). The output of <code>extractMed</code> must be saved as a CSV file, the filename of which will serve as the first input to the Pro-Med-NLP module.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># save as csv files</span>
<span class="kw">write.csv</span>(tac_mxr, <span class="dt">file=</span><span class="st">'tac_mxr.csv'</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>)
<span class="kw">write.csv</span>(lam_mxr, <span class="dt">file=</span><span class="st">'lam_mxr.csv'</span>, <span class="dt">row.names=</span><span class="ot">FALSE</span>)</code></pre></div>
</div>
<div id="tuning-the-medextractr-system" class="section level3">
<h3>Tuning the medExtractR system</h3>
<p>In a previous section, we mentioned that parameters within the Extract-Med module should be tuned in order to ensure higher quality of extracted drug information. This section describes how we go about tuning medExtractR, the NLP system underlying the Extract-Med module.</p>
<p>In order to tune medExtractR, we recommend selecting a small set of tuning notes, from which the parameter values can be selected. Below, we describe this process with a set of three notes (note that these notes were chosen for the purpose of demonstration, and we recommend using tuning sets of at least 10 notes).</p>
<p>Once a set of tuning notes has been curated, they must be manually annotated by reviewers to identify the information that should be extracted. This process produces a gold standard set of annotations, which identify the correct drug information of interest. This includes entities like the drug name, strength, and frequency. For example, in the phrase<br />
<span class="math display">\[\text{Patient is taking } \textbf{lamotrigine} \text{ } \textit{300 mg} \text{ in the } \underline{\text{morning}} \text{ and } \textit{200 mg} \text{ in the }\underline{\text{evening}}\]</span></p>
<p>bolded, italicized, and underlined phrases represent annotated drug names, dose (i.e., dose given intake), and intake times, respectively. These annotations are stored as a dataset.</p>
<p>First, we read in the annotation files for three example tuning notes, which can be generated using an annotation tool, such as the Brat Rapid Annotation Tool (BRAT) software.<span class="math inline">\(^{4}\)</span> By default, the output file from BRAT is tab delimited with 3 columns: an annotation identifier, a column with labelling information in the format &quot;label startPosition stopPosition&quot;, and the annotation itself, as shown in the example below:</p>
<pre><code>##   id           entity  annotation
## 1 T1   DrugName 19 30 lamotrigine
## 2 T2       Dose 31 37      300 mg
## 3 T3 IntakeTime 45 52     morning
## 4 T4       Dose 57 63      200 mg
## 5 T5 IntakeTime 71 78     evening</code></pre>
<p>In order to compare with the medExtractR output, the format of the annotation dataset should be four columns with:</p>
<ol style="list-style-type: decimal">
<li>The file name of the corresponding clinical note<br />
</li>
<li>The entity label of the annotated expression<br />
</li>
<li>The annotated expression<br />
</li>
<li>The start and stop position of the annotated expression in the format &quot;start:stop&quot;</li>
</ol>
<p>The exact formatting performed below is specific to the format of the annotation files, and may vary if an annotation software other than BRAT is used.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Read in the annotations - might be specific to annotation method/software</span>
ann_filenames &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">system.file</span>(<span class="st">&quot;mxr_tune&quot;</span>, <span class="st">&quot;tune_note1.ann&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>),
                      <span class="kw">system.file</span>(<span class="st">&quot;mxr_tune&quot;</span>, <span class="st">&quot;tune_note2.ann&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>),
                      <span class="kw">system.file</span>(<span class="st">&quot;mxr_tune&quot;</span>, <span class="st">&quot;tune_note3.ann&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>))

tune_ann &lt;-<span class="st"> </span><span class="kw">do.call</span>(rbind, <span class="kw">lapply</span>(ann_filenames, <span class="cf">function</span>(fn){
  annotations &lt;-<span class="st"> </span><span class="kw">read.delim</span>(fn, 
                            <span class="dt">header =</span> <span class="ot">FALSE</span>, <span class="dt">sep =</span> <span class="st">&quot;</span><span class="ch">\t</span><span class="st">&quot;</span>, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>, 
                            <span class="dt">col.names =</span> <span class="kw">c</span>(<span class="st">&quot;id&quot;</span>, <span class="st">&quot;entity&quot;</span>, <span class="st">&quot;annotation&quot;</span>))
  
  <span class="co"># Label with file name</span>
  annotations<span class="op">$</span>filename &lt;-<span class="st"> </span><span class="kw">sub</span>(<span class="st">&quot;.ann&quot;</span>, <span class="st">&quot;.txt&quot;</span>, <span class="kw">sub</span>(<span class="st">&quot;.+/&quot;</span>, <span class="st">&quot;&quot;</span>, fn), <span class="dt">fixed=</span><span class="ot">TRUE</span>)
  
  <span class="co"># Separate entity information into entity label and start:stop position</span>
  <span class="co"># Format is &quot;entity start stop&quot;</span>
  ent_info &lt;-<span class="st"> </span><span class="kw">strsplit</span>(<span class="kw">as.character</span>(annotations<span class="op">$</span>entity), <span class="dt">split=</span><span class="st">&quot;</span><span class="ch">\\</span><span class="st">s&quot;</span>)
  annotations<span class="op">$</span>entity &lt;-<span class="st"> </span><span class="kw">unlist</span>(<span class="kw">lapply</span>(ent_info, <span class="st">'[['</span>, <span class="dv">1</span>))
  annotations<span class="op">$</span>pos &lt;-<span class="st"> </span><span class="kw">paste</span>(<span class="kw">lapply</span>(ent_info, <span class="st">'[['</span>, <span class="dv">2</span>), 
                           <span class="kw">lapply</span>(ent_info, <span class="st">'[['</span>, <span class="dv">3</span>), <span class="dt">sep=</span><span class="st">&quot;:&quot;</span>)
  
  annotations &lt;-<span class="st"> </span>annotations[,<span class="kw">c</span>(<span class="st">&quot;filename&quot;</span>, <span class="st">&quot;entity&quot;</span>, <span class="st">&quot;annotation&quot;</span>, <span class="st">&quot;pos&quot;</span>)]
  
  <span class="kw">return</span>(annotations)
}))

<span class="kw">head</span>(tune_ann)</code></pre></div>
<pre><code>##         filename    entity  annotation       pos
## 1 tune_note1.txt  DrugName     Prograf 1219:1226
## 2 tune_note1.txt  Strength        1 mg 1227:1231
## 3 tune_note1.txt   DoseAmt           3 1236:1237
## 4 tune_note1.txt Frequency twice a day 1256:1267
## 5 tune_note1.txt  DrugName     porgraf 3912:3919
## 6 tune_note1.txt      Dose         3mg 3920:3923</code></pre>
<p>To select appropriate tuning parameters, we identify a range of possible values for each of the <code>windowlength</code> and <code>max_edit_dist</code> parameters. Here, we allow <code>windowlength</code> to vary from 30 to 120 characters in increments of 30, and <code>max_edit_dist</code> to take a value of 0, 1, or 2. We then obtain the <code>extractMed</code> results for each combination. We set <code>progress=FALSE</code> to avoid printing the progress message for each combination of arguments.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">wind_len &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">30</span>, <span class="dv">120</span>, <span class="dv">30</span>)
max_edit &lt;-<span class="st"> </span><span class="kw">seq</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">1</span>)
tune_pick &lt;-<span class="st"> </span><span class="kw">expand.grid</span>(<span class="st">&quot;window_length&quot;</span> =<span class="st"> </span>wind_len, 
                         <span class="st">&quot;max_edit_distance&quot;</span> =<span class="st"> </span>max_edit)

<span class="co"># Run the Extract-Med module on the tuning notes</span>
note_filenames &lt;-<span class="st"> </span><span class="kw">list</span>(<span class="kw">system.file</span>(<span class="st">&quot;mxr_tune&quot;</span>, <span class="st">&quot;tune_note1.txt&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>),
                       <span class="kw">system.file</span>(<span class="st">&quot;mxr_tune&quot;</span>, <span class="st">&quot;tune_note2.txt&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>),
                       <span class="kw">system.file</span>(<span class="st">&quot;mxr_tune&quot;</span>, <span class="st">&quot;tune_note3.txt&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>))

<span class="co"># List to store output for each parameter combination</span>
mxr_tune &lt;-<span class="st"> </span><span class="kw">vector</span>(<span class="dt">mode=</span><span class="st">&quot;list&quot;</span>, <span class="dt">length=</span><span class="kw">nrow</span>(tune_pick))

<span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">1</span><span class="op">:</span><span class="kw">nrow</span>(tune_pick)){
  mxr_tune[[i]] &lt;-<span class="st"> </span><span class="kw">extractMed</span>(note_filenames,
               <span class="dt">drugnames =</span> <span class="kw">c</span>(<span class="st">&quot;tacrolimus&quot;</span>, <span class="st">&quot;prograf&quot;</span>, <span class="st">&quot;tac&quot;</span>, <span class="st">&quot;tacro&quot;</span>, <span class="st">&quot;fk&quot;</span>, <span class="st">&quot;fk506&quot;</span>),
               <span class="dt">drgunit =</span> <span class="st">&quot;mg&quot;</span>,
               <span class="dt">windowlength =</span> tune_pick<span class="op">$</span>window_length[i],
               <span class="dt">max_edit_dist =</span> tune_pick<span class="op">$</span>max_edit_distance[i],
               <span class="dt">progress =</span> <span class="ot">FALSE</span>)
}</code></pre></div>
<p>Finally, we determine which parameter combination yielded the highest performance, quantified by some metric. For our purpose, we used the F1-measure (F1), the harmonic mean of precision <span class="math inline">\(\left(\frac{\text{true positives}}{\text{true positives + false positives}}\right)\)</span> and recall <span class="math inline">\(\left(\frac{\text{true positives}}{\text{true positives + false negatives}}\right)\)</span>. Tuning parameters were selected based on which combination maximized F1 performance within the tuning set. The code below determines true positives as well as false positives and negatives, used to compute precision, recall, and F1.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="co"># Functions to compute true positive, false positive, and false negatives</span>
<span class="co"># number of true positives - how many annotations were correctly identified by extractMed</span>
Tpos &lt;-<span class="st"> </span><span class="cf">function</span>(df){
  <span class="kw">sum</span>(df<span class="op">$</span>annotation <span class="op">==</span><span class="st"> </span>df<span class="op">$</span>expr, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)
}
<span class="co"># number of false positive (identified by extractMed but not annotated)</span>
Fpos &lt;-<span class="st"> </span><span class="cf">function</span>(df){
  <span class="kw">sum</span>(<span class="kw">is.na</span>(df<span class="op">$</span>annotation))
}
<span class="co"># number of false negatives (annotated but not identified by extractMed)</span>
Fneg &lt;-<span class="st"> </span><span class="cf">function</span>(df){
  <span class="co"># keep only rows with annotation</span>
  df_ann &lt;-<span class="st"> </span><span class="kw">subset</span>(df, <span class="op">!</span><span class="kw">is.na</span>(annotation))
  <span class="kw">sum</span>(<span class="kw">is.na</span>(df<span class="op">$</span>expr))
}

prf &lt;-<span class="st"> </span><span class="cf">function</span>(df){
  tp &lt;-<span class="st"> </span><span class="kw">Tpos</span>(df)
  fp &lt;-<span class="st"> </span><span class="kw">Fpos</span>(df)
  fn &lt;-<span class="st"> </span><span class="kw">Fneg</span>(df)
  
  precision &lt;-<span class="st"> </span>tp<span class="op">/</span>(tp <span class="op">+</span><span class="st"> </span>fp)
  recall &lt;-<span class="st"> </span>tp<span class="op">/</span>(tp <span class="op">+</span><span class="st"> </span>fn) 
  f1 &lt;-<span class="st"> </span>(<span class="dv">2</span><span class="op">*</span>precision<span class="op">*</span>recall)<span class="op">/</span>(precision <span class="op">+</span><span class="st"> </span>recall)
  
  <span class="kw">return</span>(f1)
}</code></pre></div>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tune_pick<span class="op">$</span>F1 &lt;-<span class="st"> </span><span class="kw">sapply</span>(mxr_tune, <span class="cf">function</span>(x){
  compare &lt;-<span class="st"> </span><span class="kw">merge</span>(x, tune_ann, 
                   <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;filename&quot;</span>, <span class="st">&quot;entity&quot;</span>, <span class="st">&quot;pos&quot;</span>), <span class="dt">all =</span> <span class="ot">TRUE</span>)
  <span class="kw">prf</span>(compare)
})


<span class="kw">ggplot</span>(tune_pick) <span class="op">+</span><span class="st"> </span><span class="kw">geom_point</span>(<span class="kw">aes</span>(max_edit_distance, window_length, <span class="dt">size =</span> F1)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">scale_y_continuous</span>(<span class="dt">breaks=</span><span class="kw">seq</span>(<span class="dv">30</span>,<span class="dv">120</span>,<span class="dv">30</span>)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">annotate</span>(<span class="st">&quot;text&quot;</span>, <span class="dt">x =</span> tune_pick<span class="op">$</span>max_edit_distance<span class="op">+</span>.<span class="dv">2</span>, <span class="dt">y =</span> tune_pick<span class="op">$</span>window_length,
           <span class="dt">label =</span> <span class="kw">round</span>(tune_pick<span class="op">$</span>F1, <span class="dv">2</span>)) <span class="op">+</span><span class="st"> </span>
<span class="st">  </span><span class="kw">ggtitle</span>(<span class="st">&quot;F1 for tuning parameter values&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASAAAAEgCAYAAAAUg66AAAAEGWlDQ1BrQ0dDb2xvclNwYWNlR2VuZXJpY1JHQgAAOI2NVV1oHFUUPrtzZyMkzlNsNIV0qD8NJQ2TVjShtLp/3d02bpZJNtoi6GT27s6Yyc44M7v9oU9FUHwx6psUxL+3gCAo9Q/bPrQvlQol2tQgKD60+INQ6Ium65k7M5lpurHeZe58853vnnvuuWfvBei5qliWkRQBFpquLRcy4nOHj4g9K5CEh6AXBqFXUR0rXalMAjZPC3e1W99Dwntf2dXd/p+tt0YdFSBxH2Kz5qgLiI8B8KdVy3YBevqRHz/qWh72Yui3MUDEL3q44WPXw3M+fo1pZuQs4tOIBVVTaoiXEI/MxfhGDPsxsNZfoE1q66ro5aJim3XdoLFw72H+n23BaIXzbcOnz5mfPoTvYVz7KzUl5+FRxEuqkp9G/Ajia219thzg25abkRE/BpDc3pqvphHvRFys2weqvp+krbWKIX7nhDbzLOItiM8358pTwdirqpPFnMF2xLc1WvLyOwTAibpbmvHHcvttU57y5+XqNZrLe3lE/Pq8eUj2fXKfOe3pfOjzhJYtB/yll5SDFcSDiH+hRkH25+L+sdxKEAMZahrlSX8ukqMOWy/jXW2m6M9LDBc31B9LFuv6gVKg/0Szi3KAr1kGq1GMjU/aLbnq6/lRxc4XfJ98hTargX++DbMJBSiYMIe9Ck1YAxFkKEAG3xbYaKmDDgYyFK0UGYpfoWYXG+fAPPI6tJnNwb7ClP7IyF+D+bjOtCpkhz6CFrIa/I6sFtNl8auFXGMTP34sNwI/JhkgEtmDz14ySfaRcTIBInmKPE32kxyyE2Tv+thKbEVePDfW/byMM1Kmm0XdObS7oGD/MypMXFPXrCwOtoYjyyn7BV29/MZfsVzpLDdRtuIZnbpXzvlf+ev8MvYr/Gqk4H/kV/G3csdazLuyTMPsbFhzd1UabQbjFvDRmcWJxR3zcfHkVw9GfpbJmeev9F08WW8uDkaslwX6avlWGU6NRKz0g/SHtCy9J30o/ca9zX3Kfc19zn3BXQKRO8ud477hLnAfc1/G9mrzGlrfexZ5GLdn6ZZrrEohI2wVHhZywjbhUWEy8icMCGNCUdiBlq3r+xafL549HQ5jH+an+1y+LlYBifuxAvRN/lVVVOlwlCkdVm9NOL5BE4wkQ2SMlDZU97hX86EilU/lUmkQUztTE6mx1EEPh7OmdqBtAvv8HdWpbrJS6tJj3n0CWdM6busNzRV3S9KTYhqvNiqWmuroiKgYhshMjmhTh9ptWhsF7970j/SbMrsPE1suR5z7DMC+P/Hs+y7ijrQAlhyAgccjbhjPygfeBTjzhNqy28EdkUh8C+DU9+z2v/oyeH791OncxHOs5y2AtTc7nb/f73TWPkD/qwBnjX8BoJ98VQNcC+8AAEAASURBVHgB7Z0HuBVFssdb3fWtaXXNigpiVswRI2LGLCAKIpjFhAETJkTMOeecUDCArBkUzDnnHDBnxbzO61+912f7zJ0zp+eEe1LV9917JvR0d/1npqa6qrp6qsiSUVIEFAFFoAYITF2DNrVJRUARUAQEARVA+iAoAopAzRBQAVQz6LVhRUARUAGkz4AioAjUDAEVQDWDXhtWBBQBFUD6DCgCikDNEPhbzVquQsO//vqrGTx4cGrN2267rVlvvfXalDn11FPNPPPMY3bYYYc255IO3HzzzWbkyJHmyy+/NAcffLDZYostkoqVfeyrr74ys88+e9n1JFVw7LHHmllnndXsu+++Saf1WAUQqOb9q0D38qo44ogjzAILLGD22GOPvONV3SEOqFno+++/J6YpmmGGGaL55psv8e/SSy9tw+4VV1wh1x1wwAFtziUdeOKJJ6Kpp5466tixY9SvX7/o0UcfTSpW1rHff/892mijjaIRI0aUVU/axUsttVS08cYbpxXRc2UgMGbMmMh+PMqooX0v7dSpU9SzZ892bbSpNCAnqbfbbjtz2WWXud2Cv7/99ps57rjjzMknn1ywTNKJp556yvz1119m9OjRZqWVVkoqUvaxX375xdxzzz1mrbXWKruuQhXceuut5u9//3uh03q8TAQefPBB891335VZS3Nf3rI2oJ9//tksv/zy5sQTTzSHHXaYsRpN0J2ePHmy+fDDD6UsLy/7Pn366afmvvvuM1ZLMlOmTPFPyf77779v7CfGvPzyy+bFF1/MO+92rPaTa+Pbb7817pqPP/5YhnyunPvlvP+g0yeug+grgowycZpxxhnN9NNPL4fpK2XoG4LZanXyB06F6IUXXjCPPfaYlKcc1//nP/8pVFyw+uabb6SNV155xTz88MPmzz//LFj+s88+M7zE48ePNx999FFeOb+/SVjCA8f//e9/m+eff97E+fCvZ+g+adIk8/rrr+e18cYbb5gnn3wy75i/Ay8PPPCAefzxx9vU/8UXX5gffvhBioOLux8cAKNXX33V3H333YKZXyfbft+SeHPl6Td1//TTT+5Q7pfngXN8KB2l4enK+L+hzxvXFOPJ1Qum3JPnnnvO8JHlYWgackOwXXbZpShP9gGRIY59eKQsQ6qQIdgSSywhwzULqPwutthicr19wKOdd945mmqqqaJppplGzs0000zRJZdckuvLddddJ8fPP//8XB3nnHNO7rzbsDcnd961Q/1JKjJDNcocfvjh7vKIPu61117R1ltvnVcPw8U//vgjV84fgt10001S1mpFEf127c4xxxzRxIkTc9ewYV+caN5555Uy4MY27XONFRR5Zf0d+rXjjjtGa665ZmSFd2SFXzTzzDNHcQw++eSTqEePHrn6XV/gx750UmUalldffXU0yyyz5F3PUOjOO+/Mdcfxa+140g/XhtU4I2u3idZee225nuOdO3eO7rrrrty1YG4/WjIMh3/u+T//+c/ommuuyZXZcsstc9dTxyGHHCLnnnnmmWjxxReXc+45YRhshUPu2jTecoXshhWA0f/8z/9Ee++9t39YtjfccMNokUUWke0QPCkYf77i+5RJet5CeLJCNVp//fXz+ObeN6UAsgbhyH652vylvRyhAsh+yaKjjjpKgHz77bcj9iFr/JaX6qKLLooQFgi4gQMHSjlsAZB7sHgZLrjggujss8+O7FdGzvn/rFYQvffee3Lt0KFD5YXgfOgDwYv+t7/9LeIlsF92aWPAgAFSnx025ppKEkAInHPPPTfiob333ntFQHTp0iV3zVtvvSUv92abbRZZbS+yX9/ohBNOkLp50dIwdsLbOgKiH3/8UR5mXmReRNpyhB3iH//4hwg6HtzXXntNhDv1I1ygQlharVL6sv3220fvvPNOxPXgP9tss0ULLrigayJyAghhe9tttwm/hx56qFyL8OJjQru8XNY5EYGVI2u8l3II3Q8++ECegX322UeOgTdktZ9ozz33lPuAQKMfX3/9tfRjmWWWkT7xMlO+Q4cOkXWMuOoL8pYr4G306dNH7EzU5Yh7B6bHH3+8HArBk4Lx5yu+T5m4AArlCcx4JhHkfETefPNN+RA1pQDiQU3642UuRKECiOvtsE3q5wsE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" /><!-- --></p>
<p>The plot shows that the highest F1 achieved was 1, and occurred for three different combinations of parameter values: a maximum edit distance of 2 and a window length of 60, 90, or 120 characters. The relatively small number of unique F1 values is likely the result of only using 3 tuning notes. In this case, we would typically err on the side of allowing a larger search window and decide to use a maximum edit distance of 2 and a window length of 120 characters. In a real-world tuning scenario and with a larger tuning set, we would also want to test longer window lengths since the best case scenario occurred at the longest window length we used.</p>
</div>
</div>
<div id="pro-med-nlp" class="section level2">
<h2>Pro-Med-NLP</h2>
<p>The <em>Pro-Med-NLP</em> module uses a dose data building algorithm to generate longitudinal medication dose data from the raw output of an NLP system.<span class="math inline">\(^{5}\)</span> The algorithm is divided into two parts. Part I parses the raw output and pairs entities together, and Part II calculates dose intake and daily dose and removes redundant information.</p>
<div id="part-i" class="section level3">
<h3>Part I</h3>
<p>Two main functions are used in this part of the algorithm, a parse function (<code>parseMedExtractR</code>, <code>parseMedXN</code>, <code>parseCLAMP</code>, or <code>parseMedEx</code>) and <code>buildDose</code>.</p>
<div id="parse-functions-parsemedextractr-parsemedxn-parseclamp-parsemedex" class="section level4">
<h4>Parse functions (<code>parseMedExtractR</code>, <code>parseMedXN</code>, <code>parseCLAMP</code>, <code>parseMedEx</code>)</h4>
<p>Parse functions are available for the medExtractR, MedXN, CLAMP, and MedEx systems (<code>parseMedExtractR</code>, <code>parseMedXN</code>, <code>parseCLAMP</code>, <code>parseMedEx</code>). If the user has output from another NLP system, the user can write code to standardize the output before calling the <code>buildDose</code> function.</p>
<p>The parse functions require the following argument:</p>
<ul>
<li><code>filename</code>: file name for a file containing the raw output from the NLP system</li>
</ul>
<p>The following are the function calls for the parse functions.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">parseMedExtractR</span>(filename)
<span class="kw">parseMedXN</span>(filename, <span class="dt">begText =</span> <span class="st">&quot;^[ID0-9]+_[0-9-]+_[Note0-9]&quot;</span>)
<span class="kw">parseCLAMP</span>(filename)
<span class="kw">parseMedEx</span>(filename)</code></pre></div>
<p>The <code>parseMedXN</code> function also has an argument specifying a regular expression pattern which indicates the start of each row (i.e., drug mention) in the raw MedXN output. In the example above, the <code>begText</code> argument identifies how the file names are structured for a set of clinical notes in a Vanderbilt University dataset (e.g., &quot;ID111_2000-01-01_Note001&quot; where ID111 is the patient ID, 2000-01-01 is the date of the note, and Note001 is the note ID). Thus, each row beginning with a file name in this format indicates a new drug mention.</p>
<p>The parse functions output a standardized form of the data that includes a row for each drug mention and columns for all entities anchored to that drug mention.</p>
</div>
<div id="running-parsemedextractr" class="section level4">
<h4>Running <code>parseMedExtractR</code></h4>
<p>Below we demonstrate how to run <code>parseMedExtractR</code> using the example medExtractR output from above. The file names here correspond to the files generated from the final output of the Extract-Med module.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tac_mxr_fn &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;tac_mxr.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>)
lam_mxr_fn &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;lam_mxr.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>)
lam_mxn_fn &lt;-<span class="st"> </span><span class="kw">system.file</span>(<span class="st">&quot;examples&quot;</span>, <span class="st">&quot;lam_medxn.csv&quot;</span>, <span class="dt">package =</span> <span class="st">&quot;EHR&quot;</span>)
tac_mxr_parsed &lt;-<span class="st"> </span><span class="kw">parseMedExtractR</span>(tac_mxr_fn)
lam_mxr_parsed &lt;-<span class="st"> </span><span class="kw">parseMedExtractR</span>(lam_mxr_fn)</code></pre></div>
</div>
<div id="running-parsemedxn" class="section level4">
<h4>Running <code>parseMedXN</code></h4>
<p>Below is an example using the <code>parseMedXN</code> function.</p>
<pre><code>## MedXN output:</code></pre>
<pre><code>## ID1_2012-11-22_Note1.txt|lamotrigine::255::266|28439::196502|100 mg::278::284|
##      2::288::289`1.5::310::313|tabs::290::294`tabs::314::318`tabs::350::354||
##      morning::298::305`evening::322::329|2 weeks::334::341
## ID1_2012-11-22_Note1.txt|Vimpat::1086::1092|809979|200mg::1093::1098||tab::1099::1102|
##      mouth::1106::1111|twice daily::1112::1123
## ID1_2012-11-22_Note1.txt|lamotrigine::1172::1183|28439|100 mg::1184::1190||
##      tablet::1191::1197
## ID1_2012-11-22_Note1.txt|Lamictal::1213::1221|196502||1.5::1223::1226|
##      tablets::1227::1234|mouth::1238::1243|twice a day::1244::1255</code></pre>
<p>The output from all systems, once parsed, has the same structure as the example parsed MedXN output below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lam_mxn_parsed &lt;-<span class="st"> </span><span class="kw">parseMedXN</span>(lam_mxn_fn, <span class="dt">begText =</span> <span class="st">&quot;^[ID0-9]+_[0-9-]+_[Note0-9]&quot;</span>)</code></pre></div>
<pre><code>##                   filename                drugname           strength
## 1 ID1_2012-11-22_Note1.txt   lamotrigine::255::266   100 mg::278::284
## 2 ID1_2012-11-22_Note1.txt      Vimpat::1086::1092  200mg::1093::1098
## 3 ID1_2012-11-22_Note1.txt lamotrigine::1172::1183 100 mg::1184::1190
## 4 ID1_2012-11-22_Note1.txt    Lamictal::1213::1221                   
## 
##                             dose             route
##      1 2::288::289`1.5::310::313                  
##      2                           mouth::1106::1111
##      3                                        &lt;NA&gt;
##      4           1.5::1223::1226 mouth::1238::1243
## 
##                                       freq          duration
##      1 morning::298::305`evening::322::329 2 weeks::334::341
##      2             twice daily::1112::1123              &lt;NA&gt;
##      3                                &lt;NA&gt;              &lt;NA&gt;
##      4             twice a day::1244::1255              &lt;NA&gt;</code></pre>
</div>
<div id="builddose" class="section level4">
<h4><code>buildDose</code></h4>
<p>After the NLP output is parsed, the <code>buildDose</code> function is run to pair the parsed entities. The main <code>buildDose</code> function arguments are as follows:</p>
<ul>
<li><code>dat</code>: standardized form of the data (i.e., output from one of the parse functions)</li>
<li><code>dn</code>: argument to specify drug names of interest (generally not used with medExtractR since medExtractR is a targeted system and only includes the drug of interest in the raw output)</li>
</ul>
<p>The general function call is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">buildDose</span>(dat, <span class="dt">dn =</span> <span class="ot">NULL</span>)</code></pre></div>
<p>Other notable arguments that can be specified by <code>buildDose</code> include:</p>
<ul>
<li><code>preserve</code>: columns which should be preserved in the final output, but not considered for pairing with other entities. The default is <code>NULL</code>, though for medExtractR the dose change entity is always preserved.</li>
<li><code>dist_method</code>: which distance method calculation to use in cost calculation for pairing entities. For more details see the supplementary material in McNeer, et al. (2020). The default from <code>getOption('ehr.dist_method')</code> is <em>minEntEnd</em>, or using the minimum distance between the end of one entity and beginning of the next).</li>
<li><code>checkForRare</code>: a logical argument, indicates whether or not the output should return rare occurrences of entities (default is <code>FALSE</code>)</li>
</ul>
<p>The output of the <code>buildDose</code> function is a dataset with a column for each entity and a row for each pairing.</p>
</div>
<div id="running-builddose" class="section level4">
<h4>Running <code>buildDose</code></h4>
<p>In our medExtractR example from above, the output of the <code>buildDose</code> function is the following:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(tac_part_i_out &lt;-<span class="st"> </span><span class="kw">buildDose</span>(tac_mxr_parsed))</code></pre></div>
<pre><code>##                         filename   drugname strength dose route        freq
## 1 tacpid1_2008-06-26_note1_1.txt    Prograf     1 mg    3    NA twice a day
## 2 tacpid1_2008-06-26_note1_1.txt    prograf     &lt;NA&gt; &lt;NA&gt;    NA         bid
## 3 tacpid1_2008-06-26_note2_1.txt    Prograf     1 mg    3    NA twice a day
## 4 tacpid1_2008-12-16_note3_1.txt Tacrolimus     &lt;NA&gt; &lt;NA&gt;    NA        &lt;NA&gt;
## 5 tacpid1_2008-12-16_note3_1.txt    Prograf     1 mg    3    NA twice a day
## 6 tacpid1_2008-12-16_note3_1.txt    Prograf     &lt;NA&gt; &lt;NA&gt;    NA         bid
## 7 tacpid1_2008-12-16_note3_1.txt    Prograf     &lt;NA&gt; &lt;NA&gt;    NA        &lt;NA&gt;
##   dosestr dosechange lastdose drugname_start
## 1    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            930
## 2     3mg       &lt;NA&gt;   8:30pm           2709
## 3    &lt;NA&gt;       &lt;NA&gt;    14 hr            618
## 4    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            722
## 5    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            761
## 6     2mg   decrease     &lt;NA&gt;           2179
## 7    &lt;NA&gt;       &lt;NA&gt; 10:30 pm           2205</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(lam_part_i_out &lt;-<span class="st"> </span><span class="kw">buildDose</span>(lam_mxr_parsed))</code></pre></div>
<pre><code>##                          filename       drugname strength dose route
## 1  lampid1_2016-02-05_note4_1.txt       Lamictal     &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt;
## 2  lampid1_2016-02-05_note4_1.txt    Lamotrigine    200mg  1.5  &lt;NA&gt;
## 3  lampid1_2016-02-05_note4_1.txt Lamotrigine XR   100 mg    3  &lt;NA&gt;
## 4  lampid1_2016-02-05_note4_1.txt Lamotrigine XR   100 mg    2  &lt;NA&gt;
## 5  lampid1_2016-02-05_note5_1.txt            ltg   200 mg  1.5  &lt;NA&gt;
## 6  lampid1_2016-02-05_note5_1.txt         ltg xr   100 mg    3  &lt;NA&gt;
## 7  lampid1_2016-02-05_note5_1.txt         ltg xr   100 mg    2  &lt;NA&gt;
## 8  lampid2_2008-07-20_note6_1.txt    lamotrigine     &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt;
## 9  lampid2_2008-07-20_note6_1.txt       lamictal     &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt;
## 10 lampid2_2008-07-20_note6_1.txt       Lamictal     &lt;NA&gt; &lt;NA&gt;  &lt;NA&gt;
## 11 lampid2_2012-04-15_note7_1.txt    lamotrigine   150 mg &lt;NA&gt;  &lt;NA&gt;
## 12 lampid2_2012-04-15_note7_1.txt       Lamictal     &lt;NA&gt;    1  &lt;NA&gt;
##           freq dosestr dosechange lastdose drugname_start
## 1          BID  300 mg       &lt;NA&gt;     &lt;NA&gt;            810
## 2  twice daily    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            847
## 3      morning    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            954
## 4      evening    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            954
## 5        daily    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            442
## 6        in am    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            465
## 7        in pm    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            465
## 8         &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;           1267
## 9         q12h  150 mg       &lt;NA&gt;     &lt;NA&gt;           1280
## 10         BID   200mg   Increase     &lt;NA&gt;           2273
## 11        &lt;NA&gt;    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            103
## 12 twice a day    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            141</code></pre>
<p>If the <code>checkForRare</code> argument is set to <code>TRUE</code>, any extracted expressions with a proportion of occurrence less than 0.2 are returned as rare values. When rare values are identified, a warning is printed to notify the user. The <code>var</code> column indicates the entity (note that <code>dose</code> in this output refers to dose amount, while <code>dosestr</code> would indicate dose given intake). This can be used as a quick check for potentially inaccurate information and allow the user to remove incorrect extractions before applying the Pro-Med-NLP module as incorrect extractions would reduce accuracy of the dose building data. Note that these values may still be correct extractions even though they are rare, as is the case for our output below.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lam_checkForRare &lt;-<span class="st"> </span><span class="kw">buildDose</span>(lam_mxr_parsed, <span class="dt">checkForRare=</span><span class="ot">TRUE</span>)</code></pre></div>
<pre><code>## Warning in buildDose(lam_mxr_parsed, checkForRare = TRUE): rare values found</code></pre>
<pre><code>##        var   val Freq       Prop
## 1 drugname   ltg    1 0.08333333
## 2 strength 150mg    1 0.14285714
## 3     dose     1    1 0.14285714</code></pre>
</div>
</div>
<div id="part-ii" class="section level3">
<h3>Part II</h3>
<p>In Part II of the algorithm, we form the final analysis datasets containing computed dosing information at the note and date level for each patient. This process requires more detailed meta data associated with each clinical note file, the format of which is described below. In this part, we also discuss how time of last dose should be incorporated when present before producing the final output dataset.</p>
<div id="notemetadata" class="section level5">
<h5><code>noteMetaData</code></h5>
<p>The meta data argument is required by the functions <code>processLastDose</code> and <code>collapseDose</code>, and requires four columns: <code>filename</code>, <code>pid</code>, <code>date</code>, <code>note.</code> In our example data, pid (patient ID), date, and note can all be extracted from the filename. Take the filename &quot;tacpid1_2008-06-26_note1_1.txt&quot; for example. It contains information in the form &quot;[PID]_[date]_[note]&quot;, where PID = &quot;tacpid1&quot;, date = &quot;2008-06-26&quot; and note = &quot;note1&quot;. The function below can build our meta data from each of the filenames.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">bmd &lt;-<span class="st"> </span><span class="cf">function</span>(x) {
  fns &lt;-<span class="st"> </span><span class="kw">strsplit</span>(x, <span class="st">'_'</span>)
  pid &lt;-<span class="st"> </span><span class="kw">sapply</span>(fns, <span class="st">`</span><span class="dt">[</span><span class="st">`</span>, <span class="dv">1</span>)
  date &lt;-<span class="st"> </span><span class="kw">as.Date</span>(<span class="kw">sapply</span>(fns, <span class="st">`</span><span class="dt">[</span><span class="st">`</span>, <span class="dv">2</span>), <span class="dt">format =</span> <span class="st">'%Y-%m-%d'</span>)
  note &lt;-<span class="st"> </span><span class="kw">sapply</span>(fns, <span class="st">`</span><span class="dt">[</span><span class="st">`</span>, <span class="dv">3</span>)
  <span class="kw">data.frame</span>(<span class="dt">filename =</span> x, pid, date, note, <span class="dt">stringsAsFactors =</span> <span class="ot">FALSE</span>)
}
<span class="kw">bmd</span>(<span class="st">&quot;tacpid1_2008-06-26_note1_1.txt&quot;</span>)</code></pre></div>
<pre><code>##                         filename     pid       date  note
## 1 tacpid1_2008-06-26_note1_1.txt tacpid1 2008-06-26 note1</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(tac_metadata &lt;-<span class="st"> </span><span class="kw">bmd</span>(tac_part_i_out[[<span class="st">'filename'</span>]]))</code></pre></div>
<pre><code>##                         filename     pid       date  note
## 1 tacpid1_2008-06-26_note1_1.txt tacpid1 2008-06-26 note1
## 2 tacpid1_2008-06-26_note1_1.txt tacpid1 2008-06-26 note1
## 3 tacpid1_2008-06-26_note2_1.txt tacpid1 2008-06-26 note2
## 4 tacpid1_2008-12-16_note3_1.txt tacpid1 2008-12-16 note3
## 5 tacpid1_2008-12-16_note3_1.txt tacpid1 2008-12-16 note3
## 6 tacpid1_2008-12-16_note3_1.txt tacpid1 2008-12-16 note3
## 7 tacpid1_2008-12-16_note3_1.txt tacpid1 2008-12-16 note3</code></pre>
</div>
<div id="handling-lastdose" class="section level4">
<h4>Handling <code>lastdose</code></h4>
<p>In this section, we cover how incorporation of the last dose entity should be handled if it was extracted during the Extract-Med module. From the <code>buildDose</code> output above, we see the raw last dose time extractions for the tacrolimus dataset. Using the functions <code>processLastDose</code> and <code>addLastDose</code>, we convert the extracted times into a processed and standardized datetime variable, and add the processed times to the <code>buildDose</code> output.</p>
<p>The <code>processLastDose</code> function requires the following arguments:</p>
<ul>
<li><code>mxrData</code>: raw output from the <code>extractMed</code> function</li>
<li><code>noteMetaData</code>: note meta data for each file name in <code>mxrData</code><br />
</li>
<li><code>labData</code>: a data frame containing lab dates and times associated with the file names within <code>mxrData</code>. This must contain at a minimum the columns <code>pid</code> and <code>date</code> (in the same format as <code>noteMetaData</code>), as well as <code>labtime</code>, a POSIXct variable indicating the date and time of a laboratory drug measurement</li>
</ul>
<p>Extracted last dose times can fall into two categories: a time expression (e.g., &quot;10am&quot;, &quot;22:00&quot;, &quot;7 last night&quot;) or a duration expression (e.g. &quot;14 hour&quot; level), where the &quot;time&quot; of last dose indicates the number of hours since the last dose was taken relative to the time of the clinical visit. In the latter case, the lab time (from the <code>labData</code> argument) is needed in order to convert the extracted duration expression into a datetime variable. Below is an example lab dataset for our sample tacrolimus data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(tac_lab, <span class="dt">package =</span> <span class="st">'EHR'</span>)
tac_lab</code></pre></div>
<pre><code>##       pid       date             labtime
## 1 tacpid1 2008-06-26 2008-06-26 10:42:00
## 2 tacpid1 2008-12-16 2008-12-16 12:11:00</code></pre>
<p>Within <code>processLastDose</code>, extracted times are converted to time expressions of the format &quot;HH:MM:SS&quot; and assigned a date based on the date of the corresponding note. When the last dose time is after 12pm, it is assumed to have been taken on the previous date.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(tac_ld &lt;-<span class="st"> </span><span class="kw">processLastDose</span>(<span class="dt">mxrData =</span> tac_mxr, <span class="dt">noteMetaData =</span> tac_metadata, <span class="dt">labData =</span> tac_lab))</code></pre></div>
<pre><code>##                         filename            lastdose    ld_pos     pid
## 1 tacpid1_2008-06-26_note1_1.txt 2008-06-25 20:30:00 2740:2746 tacpid1
## 2 tacpid1_2008-06-26_note2_1.txt 2008-06-25 20:42:00   678:683 tacpid1
## 3 tacpid1_2008-12-16_note3_1.txt 2008-12-15 22:30:00 2231:2239 tacpid1
##         date raw_time ld_start time_type             labtime
## 1 2008-06-26   8:30pm     2740      time 2008-06-26 10:42:00
## 2 2008-06-26    14 hr      678  duration 2008-06-26 10:42:00
## 3 2008-12-16 10:30 pm     2231      time 2008-12-16 12:11:00</code></pre>
<p>The function output contains the processed and standardized last dose time (<code>lastdose</code>), the original extracted expression (<code>raw_time</code>), whether the raw expression was a time or duration (<code>time_type</code>), as well as position information for the last dose time (<code>ld_start</code>) for appropriate pairing with dosing information in <code>addLastDose</code>. The <code>labtime</code> column in the output above corresponds to the information provided in the <code>labData</code> argument.</p>
<p>The <code>addLastDose</code> function requires the following arguments:</p>
<ul>
<li><code>buildData</code>: output from <code>buildDose</code></li>
<li><code>lastdoseData</code>: dataset containing last dose time information for the file names in <code>buildData</code>. This should include columns for <code>filename</code> and <code>lastdose</code>, with <code>lastdose</code> being a processed POSIXct datetime variable.</li>
</ul>
<p>In the case where last dose information was extracted from clinical notes using medExtractR, the <code>lastdoseData</code> input should be output from the <code>processLastDose</code> function containing the last dose start positions, as demonstrated below. It is possible for multiple times to be extracted from a clinical note. For extracted times within a 2 hour window of one another, <code>addLastDose</code> treats these as equivalent and extracts the last dose time. Note that this may be context-dependent, and this rule was determined based on drugs administered every 12 hours and assuming a trough drug level. For time differences of more than two hours, the last dose start position is used to pair the extracted time with the closest drug mention. Alternatively, if the user has a separate dataset with validated last dose times, they can provide their own dataset. When providing a validated dataset, there should be only one last dose time per patient ID and date.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">(tac_part_i_out_lastdose &lt;-<span class="st"> </span><span class="kw">addLastDose</span>(<span class="dt">buildData =</span> tac_part_i_out, <span class="dt">lastdoseData =</span> tac_ld))</code></pre></div>
<pre><code>##                         filename   drugname strength dose route        freq
## 1 tacpid1_2008-06-26_note1_1.txt    Prograf     1 mg    3    NA twice a day
## 2 tacpid1_2008-06-26_note1_1.txt    prograf     &lt;NA&gt; &lt;NA&gt;    NA         bid
## 3 tacpid1_2008-06-26_note2_1.txt    Prograf     1 mg    3    NA twice a day
## 4 tacpid1_2008-12-16_note3_1.txt Tacrolimus     &lt;NA&gt; &lt;NA&gt;    NA        &lt;NA&gt;
## 5 tacpid1_2008-12-16_note3_1.txt    Prograf     1 mg    3    NA twice a day
## 6 tacpid1_2008-12-16_note3_1.txt    Prograf     &lt;NA&gt; &lt;NA&gt;    NA         bid
## 7 tacpid1_2008-12-16_note3_1.txt    Prograf     &lt;NA&gt; &lt;NA&gt;    NA        &lt;NA&gt;
##   dosestr dosechange            lastdose drugname_start
## 1    &lt;NA&gt;       &lt;NA&gt;                &lt;NA&gt;            930
## 2     3mg       &lt;NA&gt; 2008-06-25 20:30:00           2709
## 3    &lt;NA&gt;       &lt;NA&gt; 2008-06-25 20:42:00            618
## 4    &lt;NA&gt;       &lt;NA&gt;                &lt;NA&gt;            722
## 5    &lt;NA&gt;       &lt;NA&gt;                &lt;NA&gt;            761
## 6     2mg   decrease                &lt;NA&gt;           2179
## 7    &lt;NA&gt;       &lt;NA&gt; 2008-12-15 22:30:00           2205</code></pre>
<p>Note that in the <code>lastdose</code> columns, we now have standardized datetime objects instead of the raw extracted expressions.</p>
</div>
<div id="collapsedose" class="section level4">
<h4><code>collapseDose</code></h4>
<p>The main function used in Part II of the algorithm is the <code>collapseDose</code> function, which relies on the underlying <code>makeDose</code> function. <code>collapseDose</code> allows the user to split the data using drug names given by regular expressions (<code>...</code>) and run <code>makeDose</code> separately on each subset of the data. For example, if the data includes multiple drugs, regular expressions can be specified for each drug. Another use of this function is to split the data by different formulations of the drug, such as separating immediate release formulations from extended release formulations, which are often written using &quot;XR&quot; or &quot;ER&quot; in the drug name.</p>
<p>The <code>collapseDose</code> function requires the following arguments:</p>
<ul>
<li><code>x</code>: output from the <code>buildDose</code> function, or from <code>addLastDose</code> if last dose information is incorporated</li>
<li><code>noteMetaData</code>: a <code>data.frame</code> with columns for filename, pid (patient id), date, and note</li>
<li><code>naFreq</code>: method to use when assigning missing frequencies; the default is to assign the most common frequency</li>
</ul>
<p>The general function call is:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">collapseDose</span>(x, noteMetaData, <span class="dt">naFreq =</span> <span class="st">'most'</span>, ...)</code></pre></div>
<p>The main function underlying <code>collapseDose</code> is <code>makeDose</code>, which standardizes entities, imputes missing values, calculates dose intake and daily dose, removes redundancies, and generates the final dose data. Two <code>data.frames</code> are generated from the <code>makeDose</code> function, one with redundancies removed at the note level and one at the date level (see McNeer et al. (2020) for details). The <code>collapseDose</code> function serves as a wrapper to <code>makeDose</code> to ensure results are collated and formatted properly for analysis.</p>
</div>
<div id="running-collapsedose" class="section level4">
<h4>Running <code>collapseDose</code></h4>
<p>For our tacrolimus example above, the output of this function is below. Note that we use the output from <code>addLastDose</code> rather than directly from <code>buildDose</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">suppressWarnings</span>(tac_part_ii &lt;-<span class="st"> </span><span class="kw">collapseDose</span>(tac_part_i_out_lastdose, tac_metadata, <span class="dt">naFreq =</span> <span class="st">'most'</span>))</code></pre></div>
<p>Note level collapsing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tac_part_ii<span class="op">$</span>note</code></pre></div>
<pre><code>##                         filename drugname strength dose  route freq dosestr
## 1 tacpid1_2008-06-26_note1_1.txt  Prograf     1 mg    3 orally  bid    &lt;NA&gt;
## 2 tacpid1_2008-06-26_note2_1.txt  Prograf     1 mg    3 orally  bid    &lt;NA&gt;
## 3 tacpid1_2008-12-16_note3_1.txt  Prograf     1 mg    3 orally  bid    &lt;NA&gt;
## 4 tacpid1_2008-12-16_note3_1.txt  Prograf     &lt;NA&gt; &lt;NA&gt; orally  bid     2mg
##   dosechange            lastdose drugname_start dosestr.num strength.num
## 1       &lt;NA&gt; 2008-06-25 20:30:00            930          NA            1
## 2       &lt;NA&gt; 2008-06-25 20:42:00            618          NA            1
## 3       &lt;NA&gt; 2008-12-15 22:30:00            761          NA            1
## 4   decrease 2008-12-15 22:30:00           2179           2           NA
##   doseamt.num freq.num dose.intake intaketime dose.seq dose.daily
## 1           3        2           3       &lt;NA&gt;       NA          6
## 2           3        2           3       &lt;NA&gt;       NA          6
## 3           3        2           3       &lt;NA&gt;       NA          6
## 4          NA        2           2       &lt;NA&gt;       NA          4</code></pre>
<p>Date level collapsing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">tac_part_ii<span class="op">$</span>date</code></pre></div>
<pre><code>##                         filename drugname strength dose  route freq dosestr
## 1 tacpid1_2008-06-26_note1_1.txt  Prograf     1 mg    3 orally  bid    &lt;NA&gt;
## 2 tacpid1_2008-06-26_note2_1.txt  Prograf     1 mg    3 orally  bid    &lt;NA&gt;
## 3 tacpid1_2008-12-16_note3_1.txt  Prograf     1 mg    3 orally  bid    &lt;NA&gt;
## 4 tacpid1_2008-12-16_note3_1.txt  Prograf     &lt;NA&gt; &lt;NA&gt; orally  bid     2mg
##   dosechange            lastdose drugname_start dosestr.num strength.num
## 1       &lt;NA&gt; 2008-06-25 20:30:00            930          NA            1
## 2       &lt;NA&gt; 2008-06-25 20:42:00            618          NA            1
## 3       &lt;NA&gt; 2008-12-15 22:30:00            761          NA            1
## 4   decrease 2008-12-15 22:30:00           2179           2           NA
##   doseamt.num freq.num dose.intake intaketime dose.seq dose.daily
## 1           3        2           3       &lt;NA&gt;       NA          6
## 2           3        2           3       &lt;NA&gt;       NA          6
## 3           3        2           3       &lt;NA&gt;       NA          6
## 4          NA        2           2       &lt;NA&gt;       NA          4</code></pre>
<p>Below, we demonstrate <code>collapseDose</code> using our lamotrigine example. In the function call, we supply an additional argument <code>'xr|er'</code> to indicate that we want to separately consider extended release formulations of lamotrigine, (usually denoted by &quot;XR&quot; or &quot;ER&quot;). This prevents regular lamotrigine mentions from being collapsed with lamotrigine XR mentions, even if the dosage is identical.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">data</span>(lam_metadata, <span class="dt">package =</span> <span class="st">'EHR'</span>)
<span class="kw">suppressWarnings</span>(lam_part_ii &lt;-<span class="st"> </span><span class="kw">collapseDose</span>(lam_part_i_out, lam_metadata, <span class="dt">naFreq =</span> <span class="st">'most'</span>, <span class="st">'xr|er'</span>))</code></pre></div>
<p>Note level collapsing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lam_part_ii<span class="op">$</span>note</code></pre></div>
<pre><code>##                         filename       drugname strength dose  route  freq
## 1 lampid1_2016-02-05_note4_1.txt       Lamictal     &lt;NA&gt; &lt;NA&gt; orally   bid
## 2 lampid1_2016-02-05_note4_1.txt Lamotrigine XR   100 mg    3 orally    am
## 3 lampid1_2016-02-05_note4_1.txt Lamotrigine XR   100 mg    2 orally    pm
## 4 lampid1_2016-02-05_note5_1.txt            ltg   200 mg  1.5 orally daily
## 5 lampid1_2016-02-05_note5_1.txt         ltg xr   100 mg    3 orally    am
## 6 lampid1_2016-02-05_note5_1.txt         ltg xr   100 mg    2 orally    pm
## 7 lampid2_2008-07-20_note6_1.txt       lamictal     &lt;NA&gt; &lt;NA&gt; orally   bid
## 8 lampid2_2008-07-20_note6_1.txt       Lamictal     &lt;NA&gt; &lt;NA&gt; orally   bid
## 9 lampid2_2012-04-15_note7_1.txt       Lamictal     &lt;NA&gt;    1 orally   bid
##   dosestr dosechange lastdose drugname_start dosestr.num strength.num
## 1  300 mg       &lt;NA&gt;     &lt;NA&gt;            810         300           NA
## 2    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            954          NA          100
## 3    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            954          NA          100
## 4    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            442          NA          200
## 5    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            465          NA          100
## 6    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            465          NA          100
## 7  150 mg       &lt;NA&gt;     &lt;NA&gt;           1280         150           NA
## 8   200mg   Increase     &lt;NA&gt;           2273         200           NA
## 9    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            141          NA          150
##   doseamt.num freq.num dose.intake intaketime dose.seq dose.daily
## 1          NA        2         300       &lt;NA&gt;       NA        600
## 2         3.0        1         300         am        1        500
## 3         2.0        1         200         pm        2        500
## 4         1.5        1         300       &lt;NA&gt;       NA        300
## 5         3.0        1         300         am        1        500
## 6         2.0        1         200         pm        2        500
## 7          NA        2         150       &lt;NA&gt;       NA        300
## 8          NA        2         200       &lt;NA&gt;       NA        400
## 9         1.0        2         150       &lt;NA&gt;       NA        300</code></pre>
<p>Date level collapsing:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">lam_part_ii<span class="op">$</span>date</code></pre></div>
<pre><code>##                         filename       drugname strength dose  route  freq
## 1 lampid1_2016-02-05_note4_1.txt       Lamictal     &lt;NA&gt; &lt;NA&gt; orally   bid
## 2 lampid1_2016-02-05_note4_1.txt Lamotrigine XR   100 mg    3 orally    am
## 3 lampid1_2016-02-05_note4_1.txt Lamotrigine XR   100 mg    2 orally    pm
## 4 lampid1_2016-02-05_note5_1.txt            ltg   200 mg  1.5 orally daily
## 5 lampid2_2008-07-20_note6_1.txt       lamictal     &lt;NA&gt; &lt;NA&gt; orally   bid
## 6 lampid2_2008-07-20_note6_1.txt       Lamictal     &lt;NA&gt; &lt;NA&gt; orally   bid
## 7 lampid2_2012-04-15_note7_1.txt       Lamictal     &lt;NA&gt;    1 orally   bid
##   dosestr dosechange lastdose drugname_start dosestr.num strength.num
## 1  300 mg       &lt;NA&gt;     &lt;NA&gt;            810         300           NA
## 2    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            954          NA          100
## 3    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            954          NA          100
## 4    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            442          NA          200
## 5  150 mg       &lt;NA&gt;     &lt;NA&gt;           1280         150           NA
## 6   200mg   Increase     &lt;NA&gt;           2273         200           NA
## 7    &lt;NA&gt;       &lt;NA&gt;     &lt;NA&gt;            141          NA          150
##   doseamt.num freq.num dose.intake intaketime dose.seq dose.daily
## 1          NA        2         300       &lt;NA&gt;       NA        600
## 2         3.0        1         300         am        1        500
## 3         2.0        1         200         pm        2        500
## 4         1.5        1         300       &lt;NA&gt;       NA        300
## 5          NA        2         150       &lt;NA&gt;       NA        300
## 6          NA        2         200       &lt;NA&gt;       NA        400
## 7         1.0        2         150       &lt;NA&gt;       NA        300</code></pre>
</div>
<div id="additional-collapsing" class="section level4">
<h4>Additional collapsing</h4>
<p>Collapsing by date or note produces observations at the daily intake level. It is possible to further collapse data to the daily level, though you may want to drop the <em>dose.intake</em> variable as it would potentially lose meaning.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span>lam_part_ii[[<span class="st">'note'</span>]]
<span class="co"># retrieve metadata for each filename</span>
k1 &lt;-<span class="st"> </span>lam_metadata[<span class="kw">match</span>(x[,<span class="st">'filename'</span>], lam_metadata[,<span class="st">'filename'</span>]), <span class="kw">c</span>(<span class="st">'pid'</span>,<span class="st">'date'</span>,<span class="st">'note'</span>)]
<span class="co"># select additional key data</span>
k2 &lt;-<span class="st"> </span><span class="kw">cbind</span>(k1, x[,<span class="kw">c</span>(<span class="st">'dose.daily'</span>,<span class="st">'drugname_start'</span>)])
<span class="co"># turn keys into character string</span>
chk &lt;-<span class="st"> </span><span class="kw">do.call</span>(paste, <span class="kw">c</span>(k2, <span class="dt">sep =</span> <span class="st">'|'</span>))
<span class="co"># keep first instance of each chk key</span>
lam_part_iii_note &lt;-<span class="st"> </span>x[<span class="op">!</span><span class="kw">duplicated</span>(chk),]
lam_part_iii_note[,<span class="kw">c</span>(<span class="st">'filename'</span>,<span class="st">'drugname'</span>,<span class="st">'drugname_start'</span>,<span class="st">'dose.daily'</span>)]</code></pre></div>
<pre><code>##                         filename       drugname drugname_start dose.daily
## 1 lampid1_2016-02-05_note4_1.txt       Lamictal            810        600
## 2 lampid1_2016-02-05_note4_1.txt Lamotrigine XR            954        500
## 4 lampid1_2016-02-05_note5_1.txt            ltg            442        300
## 5 lampid1_2016-02-05_note5_1.txt         ltg xr            465        500
## 7 lampid2_2008-07-20_note6_1.txt       lamictal           1280        300
## 8 lampid2_2008-07-20_note6_1.txt       Lamictal           2273        400
## 9 lampid2_2012-04-15_note7_1.txt       Lamictal            141        300</code></pre>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">x &lt;-<span class="st"> </span>lam_part_ii[[<span class="st">'date'</span>]]
<span class="co"># ignore note for date level collapsing</span>
k1 &lt;-<span class="st"> </span>lam_metadata[<span class="kw">match</span>(x[,<span class="st">'filename'</span>], lam_metadata[,<span class="st">'filename'</span>]), <span class="kw">c</span>(<span class="st">'pid'</span>,<span class="st">'date'</span>)]
k2 &lt;-<span class="st"> </span><span class="kw">cbind</span>(k1, x[,<span class="kw">c</span>(<span class="st">'dose.daily'</span>,<span class="st">'drugname_start'</span>)])
chk &lt;-<span class="st"> </span><span class="kw">do.call</span>(paste, <span class="kw">c</span>(k2, <span class="dt">sep =</span> <span class="st">'|'</span>))
lam_part_iii_date &lt;-<span class="st"> </span>x[<span class="op">!</span><span class="kw">duplicated</span>(chk),]
lam_part_iii_date[,<span class="kw">c</span>(<span class="st">'filename'</span>,<span class="st">'drugname'</span>,<span class="st">'drugname_start'</span>,<span class="st">'dose.daily'</span>)]</code></pre></div>
<pre><code>##                         filename       drugname drugname_start dose.daily
## 1 lampid1_2016-02-05_note4_1.txt       Lamictal            810        600
## 2 lampid1_2016-02-05_note4_1.txt Lamotrigine XR            954        500
## 4 lampid1_2016-02-05_note5_1.txt            ltg            442        300
## 5 lampid2_2008-07-20_note6_1.txt       lamictal           1280        300
## 6 lampid2_2008-07-20_note6_1.txt       Lamictal           2273        400
## 7 lampid2_2012-04-15_note7_1.txt       Lamictal            141        300</code></pre>
</div>
</div>
</div>
<div id="references" class="section level2">
<h2>References</h2>
<ol style="list-style-type: decimal">
<li><p>Choi L, Beck C, McNeer E, Weeks HL, Williams ML, James NT, Niu X, Abou-Khalil BW, Birdwell KA, Roden DM, Stein CM. Development of a System for Post-marketing Population Pharmacokinetic and Pharmacodynamic Studies using Real-World Data from Electronic Health Records. Clinical Pharmacology &amp; Therapeutics. 2020 Jan 20.</p></li>
<li><p>Weeks HL, Beck C, McNeer E, Williams ML, Bejan CA, Denny JC, Choi L. medExtractR: A targeted, customizable approach to medication extraction from electronic health records. Journal of the American Medical Informatics Association. 2020 Jan 16.</p></li>
<li><p>Weeks, HL, Beck C, and Choi, L (2019). medExtractR: Extraction of Medication Information from Clinical Text. R package version 0.1. <a href="https://CRAN.R-project.org/package=medExtractR" class="uri">https://CRAN.R-project.org/package=medExtractR</a></p></li>
<li><p>Stenetorp P, Pyysalo S, Topi G, Ohta T, Ananiadou S, Tsujii JI. BRAT: a web-based tool for NLP-assisted text annotation. InProceedings of the Demonstrations at the 13th Conference of the European Chapter of the Association for Computational Linguistics 2012 Apr 23 (pp. 102-107). Association for Computational Linguistics.</p></li>
<li><p>McNeer E, Beck C, Weeks HL, Williams ML, James NT, Choi L. A post-processing algorithm for building longitudinal medication dose data from extracted medication information using natural language processing from electronic health records. bioRxiv <a href="https://www.biorxiv.org/content/10.1101/775015v3" class="uri">https://www.biorxiv.org/content/10.1101/775015v3</a> (2020).</p></li>
</ol>
</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
